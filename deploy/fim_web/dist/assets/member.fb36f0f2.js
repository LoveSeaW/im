import{d as B,b as M,r as F,c as g,g as o,w as a,al as z,l as m,a as l,f as _,i,m as p,y as b,h as u,K as k,L as V,av as $,E as c,N as T,aw as w,ax as q}from"./index.00362c69.js";import{r as C}from"./date.b8ea58a3.js";import{_ as L}from"./fim_avatar.vue_vue_type_style_index_0_lang.0abc880b.js";const R={class:"member_view"},S={class:"info"},K={class:"icon"},U={key:0,class:"iconfont icon-qunzhu"},j={key:1,class:"iconfont icon-qunguanliyuan"},G={class:"col_group_nickname"},H={key:0},J={class:"btn_list",style:{display:"flex","flex-shrink":"0"}},X=B({__name:"member",setup(O){const t=M(),E=F({id:t.groupData.groupId,sort:"role asc"}),y=F({list:[],count:0});async function f(){let s=await z(E);y.list=s.data.list||[],y.count=s.data.count}async function A(s,r){let n=await $({id:t.groupData.groupId,memberId:s.userId,role:r});if(n.code){c.error(n.msg);return}c.success("\u6210\u5458\u89D2\u8272\u66F4\u65B0\u6210\u529F"),f()}async function v(s){let r=await T({id:t.groupData.groupId,memberId:s.userId});if(r.code){c.error(r.msg);return}c.success("\u6210\u5458\u79FB\u51FA\u6210\u529F"),f()}function x(s){w.prompt("\u7FA4\u6210\u5458\u5907\u6CE8","\u4FEE\u6539\u7FA4\u6210\u5458\u5907\u6CE8",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputValue:s.memberNickname}).then(async({value:r})=>{let n=await q({id:t.groupData.groupId,memberId:s.userId,nickname:r});if(n.code){c.error(n.msg);return}c.success("\u4FEE\u6539\u7FA4\u6210\u5458\u5907\u6CE8\u6210\u529F"),f()}).catch(()=>{})}return f(),(s,r)=>{const n=m("el-text"),d=m("el-table-column"),I=m("el-icon"),h=m("el-button"),N=m("el-table");return l(),g("div",R,[o(N,{data:y.list,style:{width:"100%"}},{default:a(()=>[o(d,{label:"\u6210\u5458",width:"150"},{default:a(({row:e})=>[_("div",S,[_("div",K,[e.role===1?(l(),g("i",U)):i("",!0),e.role===2?(l(),g("i",j)):i("",!0)]),o(L,{size:30,src:e.avatar},null,8,["src"]),o(n,{title:e.userNickname,truncated:"",style:{"max-width":"5rem"},class:"nickname"},{default:a(()=>[p(b(e.userNickname),1)]),_:2},1032,["title"])])]),_:1}),o(d,{label:"\u7FA4\u6635\u79F0",width:"100"},{default:a(({row:e})=>[_("div",G,[o(n,{title:e.memberNickname,truncated:"",style:{"max-width":"6rem"}},{default:a(()=>[p(b(e.memberNickname),1)]),_:2},1032,["title"]),u(t).groupData.role===1||u(t).groupData.role===2&&(e.role===3||e.role===2&&u(t).userInfo.userID===e.userId)||u(t).groupData.role===3&&u(t).userInfo.userID===e.userId?(l(),k(I,{key:0,onClick:D=>x(e),size:"18"},{default:a(()=>[o(u(V))]),_:2},1032,["onClick"])):i("",!0)])]),_:1}),o(d,{label:"\u52A0\u7FA4\u65F6\u95F4",width:"120"},{default:a(e=>[_("span",null,b(u(C)(e.row.createdAt)),1)]),_:1}),o(d,{label:"\u6700\u540E\u53D1\u8A00",width:"120"},{default:a(({row:e})=>[e.newMsgDate?(l(),g("span",H,b(u(C)(e.newMsgDate)),1)):i("",!0)]),_:1}),o(d,{label:"\u64CD\u4F5C",width:"210"},{default:a(({row:e})=>[_("div",J,[u(t).groupData.role===1&&e.role!==1||u(t).groupData.role===2&&e.role===3?(l(),k(h,{key:0,onClick:D=>v(e),type:"danger",size:"small"},{default:a(()=>[p(" \u8E22\u51FA\u7FA4\u804A ")]),_:2},1032,["onClick"])):i("",!0),u(t).groupData.role===1&&e.role===3?(l(),k(h,{key:1,type:"primary",size:"small",onClick:D=>A(e,2)},{default:a(()=>[p("\u5347\u4E3A\u7BA1\u7406\u5458 ")]),_:2},1032,["onClick"])):i("",!0),u(t).groupData.role===1&&e.role===2?(l(),k(h,{key:2,type:"primary",size:"small",onClick:D=>A(e,3)},{default:a(()=>[p("\u964D\u4E3A\u7FA4\u6210\u5458 ")]),_:2},1032,["onClick"])):i("",!0)])]),_:1})]),_:1},8,["data"])])}}});export{X as default};
