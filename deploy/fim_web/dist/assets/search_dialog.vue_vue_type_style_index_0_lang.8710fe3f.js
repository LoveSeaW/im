import{d as z,r as A,K as p,w as v,h as n,U,V as q,W as N,E as g,a as i,g as c,m as b,X as C,f as o,y as l,Y as R,c as r,i as _,Z as F,_ as $,$ as O}from"./index.00362c69.js";import{_ as w}from"./fim_avatar.vue_vue_type_style_index_0_lang.0abc880b.js";const T={class:"search_modal_body"},j={class:"left"},G={key:2,class:"group_info"},K={class:"right"},M={key:0,class:"mode"},S=o("div",{class:"label"},"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u6D88\u606F",-1),W={key:1,class:"mode"},X={class:"label"},Y={key:2,class:"mode"},Z={class:"label"},H={key:3,class:"mode"},J={class:"label"},L={key:0,class:"item"},P=o("span",{class:"label"},"\u95EE\u98981",-1),ee={class:"question"},ue={key:1,class:"item"},se=o("span",{class:"label"},"\u95EE\u98982",-1),oe={class:"question"},ie={key:2,class:"item"},te=o("span",{class:"label"},"\u95EE\u98983",-1),ae={class:"question"},re=z({__name:"search_dialog",props:{visible:{type:Boolean},userInfo:{},groupInfo:{},mode:{}},emits:["update:visible","close"],setup(I,{emit:k}){const u=I,h=k;function y(){h("update:visible",!1),h("close")}const e=A({verification:0,verificationQuestion:{problem1:"\u4F60\u7AE5\u5E74\u9634\u5F71\u662F\u4EC0\u4E48?",problem2:"\u4F60\u5C0F\u65F6\u5019\u73A9\u7684\u597D\u7684\u4F19\u4F34\u53EB\u4EC0\u4E48\u540D\u5B57\uFF1F",problem3:"\u4F60\u7684\u7406\u60F3\u662F\u505A\u4EC0\u4E48\uFF1F",answer1:"",answer2:"",answer3:""}});async function Q(){var s,d,m,f;let a={code:0,msg:"",data:e};if(u.mode==="user"?(E.friendId=(s=u.userInfo)==null?void 0:s.userID,a=await q((d=u.userInfo)==null?void 0:d.userID)):(B.groupID=(m=u.groupInfo)==null?void 0:m.groupId,a=await N((f=u.groupInfo)==null?void 0:f.groupId)),a.code){g.error(a.msg);return}Object.assign(e,a.data)}const E=A({friendId:0,verificationQuestion:e.verificationQuestion,verify:""}),B=A({groupID:0,verificationQuestion:e.verificationQuestion,verify:""});async function x(){let a={code:0,msg:"",data:""};if(u.mode==="user"?a=await $(E):a=await O(B),a.code){g.error(a.msg);return}u.mode==="user"?g.success("\u597D\u53CB\u7533\u8BF7\u4E2D..."):g.success("\u52A0\u7FA4\u7533\u8BF7\u4E2D..."),y()}return(a,s)=>(i(),p(n(U),{"modal-class":"search_dialog",onOpenAutoFocus:Q,"model-value":u.visible,onClose:y,title:u.mode==="user"?"\u6DFB\u52A0\u597D\u53CB":"\u6DFB\u52A0\u7FA4",width:"500",draggable:""},{footer:v(()=>[c(n(C),{size:"small",type:"primary",onClick:s[5]||(s[5]=d=>x()),disabled:e.verification===0},{default:v(()=>[b("\u4E0B\u4E00\u6B65")]),_:1},8,["disabled"]),c(n(C),{size:"small",onClick:y},{default:v(()=>[b("\u53D6\u6D88")]),_:1})]),default:v(()=>{var d,m,f,D;return[o("div",T,[o("div",j,[u.mode==="user"?(i(),p(w,{key:0,size:50,src:(d=u.userInfo)==null?void 0:d.avatar},null,8,["src"])):(i(),p(w,{key:1,size:50,src:(m=u.groupInfo)==null?void 0:m.avatar},null,8,["src"])),c(n(R),{truncated:"",style:{"max-width":"6rem"}},{default:v(()=>{var t,V;return[b(l(u.mode==="user"?(t=u.userInfo)==null?void 0:t.nickname:(V=u.groupInfo)==null?void 0:V.title),1)]}),_:1}),u.mode==="group"?(i(),r("div",G,[o("div",null,"\u6210\u5458\uFF1A"+l((f=u.groupInfo)==null?void 0:f.userCount)+"\u4EBA",1),o("div",null,"\u7B80\u4ECB\uFF1A"+l((D=u.groupInfo)==null?void 0:D.abstract),1)])):_("",!0)]),o("div",K,[e.verification===2?(i(),r("div",M,[S,u.mode==="user"?(i(),p(n(F),{key:0,type:"textarea",resize:"none",modelValue:E.verify,"onUpdate:modelValue":s[0]||(s[0]=t=>E.verify=t),autosize:{minRows:3,maxRows:4},placeholder:"\u6211\u662F..."},null,8,["modelValue"])):(i(),p(n(F),{key:1,type:"textarea",resize:"none",modelValue:B.verify,"onUpdate:modelValue":s[1]||(s[1]=t=>B.verify=t),autosize:{minRows:3,maxRows:4},placeholder:"\u6211\u662F..."},null,8,["modelValue"]))])):e.verification===0?(i(),r("div",W,[o("div",X,l(u.mode==="user"?"\u8BE5\u7528\u6237\u4E0D\u5141\u8BB8\u88AB\u52A0\u597D\u53CB":"\u4E0D\u5141\u8BB8\u4EFB\u4F55\u4EBA\u52A0\u7FA4"),1)])):e.verification===1?(i(),r("div",Y,[o("div",Z,l(u.mode==="user"?"\u53EF\u76F4\u63A5\u52A0\u597D\u53CB":"\u53EF\u76F4\u63A5\u52A0\u7FA4"),1)])):e.verification===3||e.verification===4?(i(),r("div",H,[o("div",J,l(e.verification===3?"\u8BF7\u56DE\u7B54\u9A8C\u8BC1\u95EE\u9898":"\u8BF7\u6B63\u786E\u56DE\u7B54\u9A8C\u8BC1\u95EE\u9898"),1),e.verificationQuestion.problem1?(i(),r("div",L,[P,o("span",ee,l(e.verificationQuestion.problem1),1),c(n(F),{placeholder:"\u7B54\u6848",modelValue:e.verificationQuestion.answer1,"onUpdate:modelValue":s[2]||(s[2]=t=>e.verificationQuestion.answer1=t)},null,8,["modelValue"])])):_("",!0),e.verificationQuestion.problem2?(i(),r("div",ue,[se,o("span",oe,l(e.verificationQuestion.problem2),1),c(n(F),{placeholder:"\u7B54\u6848",modelValue:e.verificationQuestion.answer2,"onUpdate:modelValue":s[3]||(s[3]=t=>e.verificationQuestion.answer2=t)},null,8,["modelValue"])])):_("",!0),e.verificationQuestion.problem3?(i(),r("div",ie,[te,o("span",ae,l(e.verificationQuestion.problem3),1),c(n(F),{placeholder:"\u7B54\u6848",modelValue:e.verificationQuestion.answer3,"onUpdate:modelValue":s[4]||(s[4]=t=>e.verificationQuestion.answer3=t)},null,8,["modelValue"])])):_("",!0)])):_("",!0)])])]}),_:1},8,["model-value","title"]))}});export{re as _};
